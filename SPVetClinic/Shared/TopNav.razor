@inject Microsoft.AspNetCore.Components.NavigationManager NavigationManager

<nav class="topnav" id="topnav">
    <div class="logo-container">
        <NavLink href="" class="logo-text">
            <img src="images/logo_pequeno_vet_clinic.png" alt="San Pablo Vet Clínic" class="logo-img" />
        </NavLink>
    </div>

    <div class="nav-links" id="navLinks">
        <NavLink href="" class="nav-link" Match="NavLinkMatch.All">
            <span class="nav-link-text">Inicio</span>
        </NavLink>

        <NavLink href="conocenos" class="nav-link">
            <span class="nav-link-text">Conócenos</span>
        </NavLink>

        <div class="nav-dropdown">
            <button class="nav-link nav-dropdown-btn" onclick="toggleDropdown(event)">
                <span class="nav-link-text">Servicios</span>
                <span class="dropdown-arrow">▾</span>
            </button>
            <div class="nav-dropdown-content">
                <NavLink href="servicios" class="dropdown-item">
                    <span>📋</span>
                    <span>Todos los Servicios</span>
                </NavLink>
                <NavLink href="examenes" class="dropdown-item">
                    <span>🔬</span>
                    <span>Exámenes</span>
                </NavLink>
                <NavLink href="especialistas" class="dropdown-item">
                    <span>👨‍⚕️</span>
                    <span>Especialistas</span>
                </NavLink>
                <NavLink href="vet-movil" class="dropdown-item">
                    <span>🚐</span>
                    <span>Vet Móvil</span>
                </NavLink>
            </div>
        </div>

        <NavLink href="contacto" class="nav-link">
            <span class="nav-link-text">Contacto</span>
        </NavLink>

        <a href="@AppConstants.Clinic.BookingUrl" target="_blank" class="nav-link nav-cta">
            <span class="nav-icon">📅</span>
            <span class="nav-link-text">Agendar Hora</span>
        </a>
    </div>

    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Menú">
        <span></span>
        <span></span>
        <span></span>
    </button>
</nav>

<script>
    function toggleMobileMenu() {
        document.getElementById('navLinks').classList.toggle('active');
        document.querySelector('.mobile-menu-btn').classList.toggle('active');
    }

    function toggleDropdown(event) {
        event.stopPropagation();
        const dropdown = event.target.closest('.nav-dropdown');
        dropdown.classList.toggle('active');

        // Close dropdown when clicking outside
        document.addEventListener('click', function closeDropdown(e) {
            if (!dropdown.contains(e.target)) {
                dropdown.classList.remove('active');
                document.removeEventListener('click', closeDropdown);
            }
        });
    }

    // Close dropdown on mobile when clicking a link
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.dropdown-item').forEach(item => {
            item.addEventListener('click', function () {
                document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('active'));
                const navLinks = document.getElementById('navLinks');
                if (navLinks) navLinks.classList.remove('active');
                const btn = document.querySelector('.mobile-menu-btn');
                if (btn) btn.classList.remove('active');
            });
        });
    });
</script>